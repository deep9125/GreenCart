@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor

@{
    ViewData["Title"] = "Welcome";
}

<!-- Main Welcome Hero Section -->
<div class="px-4 py-5 my-4 text-center bg-body-tertiary rounded-3 shadow-sm">
    <img class="d-block mx-auto mb-4" src="https://placehold.co/72x57/66cc99/FFFFFF?text=GC" alt="GreenCart Logo">
    <h1 class="display-5 fw-bold text-body-emphasis">Welcome to GreenCart 🛒</h1>
    <div class="col-lg-6 mx-auto">
        <p class="lead mb-4">
            Your one-stop marketplace for unique, homemade, and eco-friendly products. Discover items made with love by talented local creators.
        </p>

        <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
            @{
                var userId = HttpContextAccessor.HttpContext.Session.GetInt32("UserId");
                var userRole = HttpContextAccessor.HttpContext.Session.GetString("UserRole");
            }

            @if (userId != null)
            {
                @if (userRole == "Seller")
                {
                    <a class="btn btn-outline-secondary btn-lg px-4" asp-controller="Seller" asp-action="Dashboard">My Dashboard</a>
                }
                else 
                {
                    <a class="btn btn-outline-secondary btn-lg px-4" asp-controller="Orders" asp-action="History">My Orders</a>
                }
            }
            else
            {
                <a class="btn btn-primary btn-lg px-4 gap-3" asp-controller="Products" asp-action="Index">
                    <i class="bi bi-shop"></i> Shop the Marketplace
                </a>
                <a class="btn btn-outline-secondary btn-lg px-4" asp-controller="Account" asp-action="Register">
                    Become a Seller
                </a>
            }
        </div>
    </div>
</div>

<!-- "Why Choose Us?" Section -->
<div class="container px-4 py-5" id="featured-3">
    <h2 class="pb-2 border-bottom text-center">Why Choose GreenCart?</h2>
    <div class="row g-4 py-5 row-cols-1 row-cols-lg-3">
        <div class="feature col text-center">
            <div class="feature-icon d-inline-flex align-items-center justify-content-center text-bg-primary bg-gradient fs-2 mb-3 rounded-circle" style="width: 3rem; height: 3rem;">
                <i class="bi bi-heart-fill"></i>
            </div>
            <h3 class="fs-4 text-body-emphasis">Support Local Creators</h3>
            <p>Every purchase directly supports a small business or a local artisan, helping our community thrive.</p>
        </div>
        <div class="feature col text-center">
            <div class="feature-icon d-inline-flex align-items-center justify-content-center text-bg-primary bg-gradient fs-2 mb-3 rounded-circle" style="width: 3rem; height: 3rem;">
                <i class="bi bi-leaf"></i>
            </div>
            <h3 class="fs-4 text-body-emphasis">Unique & Sustainable</h3>
            <p>Find one-of-a-kind products that you won't see anywhere else, often made with sustainable and eco-friendly practices.</p>
        </div>
        <div class="feature col text-center">
            <div class="feature-icon d-inline-flex align-items-center justify-content-center text-bg-primary bg-gradient fs-2 mb-3 rounded-circle" style="width: 3rem; height: 3rem;">
                <i class="bi bi-patch-check-fill"></i>
            </div>
            <h3 class="fs-4 text-body-emphasis">Trusted Quality</h3>
            <p>Shop with confidence from a curated marketplace that values quality craftsmanship and authentic goods.</p>
        </div>
    </div>
</div>

<!-- Add Bootstrap Icons CDN to your _Layout.cshtml file if you haven't already -->
<!-- In Views/Shared/_Layout.cshtml, inside the <head> tag: -->
<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"> -->